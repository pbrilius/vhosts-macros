<Macro VHostPorted $name $domain $port>
Listen $port
<VirtualHost *:$port>
  ServerName $domain
  ServerAlias localhost.$domain

  DocumentRoot "/srv/vhosts/$name"
  ErrorLog "/var/log/apache2/$name.error_log"
  CustomLog "/var/log/apache2/$name.access_log" combined
  <Directory /srv/vhosts/$name>
    AllowOverride FileInfo
    Require all granted
  </Directory>
</VirtualHost>
</Macro>
